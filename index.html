//<script>
// localStorage._custom_rand_ = 1;


debugger;void async function(str){
let e;e=(e=new TextEncoder).encode.bind(e);

var hash = async function(str) { // unpure fn, global var db
	var buf = await window.crypto.subtle.digest("SHA-512", e(str));
	return String.fromCharCode(...new Uint8ClampedArray(buf));
}

let db = {
	db: 'bd',
	[[await hash('https://denisde4ev.github.io/lnurl/'+2e5)]]: "https://github.com/denisde4ev/lnurl",
	[[await hash('https://denisde4ev.github.io/lnurl/'+3e5)]]: "https://github.com/denisde4ev/lnurl#but have missed the first one, this must be impossible!",
	[[await hash('1https://denisde4ev.github.io/lnurl#ddg')]]: "https://ddg.gg",

};

db.Paperize = async function(str) { // paper with unknown length
	var r;
	var rand = localStorage._custom_rand_ || (Math.random()*2e5+1|0);
	console.log('starting with rand='+rand);
	for (let i=rand;--i;) {
		if (r=db[await hash(str+i)]||db[await hash(i+str)]) { debugger; return r; }
	}
	document.write('loading...<br>');
	i=rand-5; // must be just 2 missed, but just in case use 5 rehashes.
	while (++i<2e5+10) {
		if (r=db[await hash(str+i)]||db[await hash(i+str)]) { debugger; return r; }
	}
	document.write('still loading, this is taking longer than usual...<br>');
	while (++i<2e9) { // hope there is someone to stop it from overheating the CPU
		if (r=db[await hash(str+i)]||db[await hash(i+str)]) { debugger; return r; }
	}
	document.write('try again!');
	debugger
	throw {str, rand, r, i};
};


eval(localStorage._toeval_);
if (/^\d|\d$/.test(str)) str=`{${str}}`; // enshure digits won't colaps with i
let a=(await db.Paperize(str));
document.write('redirecting...<br>');
location.replace(a);

}(location.href)

//</script><style>body{color:transparent
